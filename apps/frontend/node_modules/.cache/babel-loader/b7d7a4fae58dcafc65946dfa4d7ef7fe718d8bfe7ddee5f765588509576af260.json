{"ast":null,"code":"import _objectSpread from\"C:/Users/seniy/Downloads/project (1)/project/apps/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateAccount=()=>{const[form,setForm]=useState({username:'',email:'',password:'',first_name:'',last_name:'',department:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const onChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{// role_id is required by schema; use a default general role id = 3 (enduser)\nawait axios.post('/api/auth/register',{username:form.username,email:form.email,password:form.password,first_name:form.first_name,last_name:form.last_name,role_id:3,department:form.department||'General'});navigate('/login');}catch(err){var _err$response,_err$response$data;setError((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Account creation failed');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white shadow rounded-md p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900 text-center mb-6\",children:\"Create account\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 text-sm text-red-700 bg-red-100 border border-red-200 rounded p-3\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm mb-1\",htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",name:\"username\",type:\"text\",className:\"w-full border rounded px-3 py-2\",value:form.username,onChange:onChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm mb-1\",htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",className:\"w-full border rounded px-3 py-2\",value:form.email,onChange:onChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm mb-1\",htmlFor:\"first_name\",children:\"First name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"first_name\",name:\"first_name\",type:\"text\",className:\"w-full border rounded px-3 py-2\",value:form.first_name,onChange:onChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm mb-1\",htmlFor:\"last_name\",children:\"Last name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"last_name\",name:\"last_name\",type:\"text\",className:\"w-full border rounded px-3 py-2\",value:form.last_name,onChange:onChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm mb-1\",htmlFor:\"department\",children:\"Department\"}),/*#__PURE__*/_jsx(\"input\",{id:\"department\",name:\"department\",type:\"text\",className:\"w-full border rounded px-3 py-2\",value:form.department,onChange:onChange,placeholder:\"e.g., Sales\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm mb-1\",htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",className:\"w-full border rounded px-3 py-2\",value:form.password,onChange:onChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-blue-600 hover:bg-blue-700 text-white rounded px-4 py-2 disabled:opacity-50\",children:loading?'Creating...':'Create account'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Already have an account? \"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-blue-600 hover:underline\",children:\"Sign in\"})]})]})});};export default CreateAccount;","map":{"version":3,"names":["React","useState","useNavigate","Link","axios","jsx","_jsx","jsxs","_jsxs","CreateAccount","form","setForm","username","email","password","first_name","last_name","department","error","setError","loading","setLoading","navigate","onChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","post","role_id","err","_err$response","_err$response$data","response","data","className","children","onSubmit","htmlFor","id","type","required","placeholder","disabled","to"],"sources":["C:/Users/seniy/Downloads/project (1)/project/apps/frontend/src/components/auth/CreateAccount.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst CreateAccount: React.FC = () => {\r\n  const [form, setForm] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    first_name: '',\r\n    last_name: '',\r\n    department: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      // role_id is required by schema; use a default general role id = 3 (enduser)\r\n      await axios.post('/api/auth/register', {\r\n        username: form.username,\r\n        email: form.email,\r\n        password: form.password,\r\n        first_name: form.first_name,\r\n        last_name: form.last_name,\r\n        role_id: 3,\r\n        department: form.department || 'General'\r\n      });\r\n\r\n      navigate('/login');\r\n    } catch (err: any) {\r\n      setError(err?.response?.data?.error || 'Account creation failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12\">\r\n      <div className=\"w-full max-w-md bg-white shadow rounded-md p-6\">\r\n        <h1 className=\"text-2xl font-semibold text-gray-900 text-center mb-6\">Create account</h1>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 text-sm text-red-700 bg-red-100 border border-red-200 rounded p-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm mb-1\" htmlFor=\"username\">Username</label>\r\n            <input id=\"username\" name=\"username\" type=\"text\" className=\"w-full border rounded px-3 py-2\" value={form.username} onChange={onChange} required/>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm mb-1\" htmlFor=\"email\">Email</label>\r\n            <input id=\"email\" name=\"email\" type=\"email\" className=\"w-full border rounded px-3 py-2\" value={form.email} onChange={onChange} required/>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label className=\"block text-sm mb-1\" htmlFor=\"first_name\">First name</label>\r\n              <input id=\"first_name\" name=\"first_name\" type=\"text\" className=\"w-full border rounded px-3 py-2\" value={form.first_name} onChange={onChange} required/>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm mb-1\" htmlFor=\"last_name\">Last name</label>\r\n              <input id=\"last_name\" name=\"last_name\" type=\"text\" className=\"w-full border rounded px-3 py-2\" value={form.last_name} onChange={onChange} required/>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm mb-1\" htmlFor=\"department\">Department</label>\r\n            <input id=\"department\" name=\"department\" type=\"text\" className=\"w-full border rounded px-3 py-2\" value={form.department} onChange={onChange} placeholder=\"e.g., Sales\"/>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm mb-1\" htmlFor=\"password\">Password</label>\r\n            <input id=\"password\" name=\"password\" type=\"password\" className=\"w-full border rounded px-3 py-2\" value={form.password} onChange={onChange} required/>\r\n          </div>\r\n\r\n          <button type=\"submit\" disabled={loading} className=\"w-full bg-blue-600 hover:bg-blue-700 text-white rounded px-4 py-2 disabled:opacity-50\">\r\n            {loading ? 'Creating...' : 'Create account'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"text-center mt-4 text-sm\">\r\n          <span className=\"text-gray-600\">Already have an account? </span>\r\n          <Link to=\"/login\" className=\"text-blue-600 hover:underline\">Sign in</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateAccount;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}